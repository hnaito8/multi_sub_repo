<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>å¤šè¨€èªžãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å­—å¹•</title>
  <style>
    body {
      font-family: sans-serif;
      background: #111;
      color: #fff;
      padding: 2rem;
    }
    h1 {
      font-size: 1.8rem;
      margin-bottom: 1rem;
    }
    .subtitle {
      margin: 1rem 0;
      font-size: 1.3rem;
    }
    .translated {
      margin-left: 1rem;
    }
    select, button {
      padding: 0.6rem;
      font-size: 1rem;
      margin-top: 1rem;
      margin-right: 1rem;
      border-radius: 6px;
      background: #222;
      color: #0f0;
      border: 1px solid #0f0;
    }
    .lang-label {
      font-size: 1rem;
      color: #0ff;
    }
    .remove-btn {
      margin-left: 1rem;
      background: #f33;
      border: none;
      color: white;
      padding: 0.3rem 0.5rem;
      border-radius: 4px;
      cursor: pointer;
    }
    #lang-select, #input-lang {
      max-height: 150px;
      overflow-y: auto;
    }
  </style>
</head>
<body>
  <h1>ðŸŽ¤ å¤šè¨€èªžãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å­—å¹•</h1>

  <div>
    <label class="lang-label" for="input-lang">å…¥åŠ›è¨€èªžï¼š</label>
    <select id="input-lang" onchange="changeInputLanguage()"></select>
  </div>

  <div>
    <label class="lang-label" for="lang-select">ç¿»è¨³è¨€èªžã‚’è¿½åŠ ï¼š</label>
    <select id="lang-select"></select>
    <button onclick="addLanguage()">è¿½åŠ </button>
  </div>

  <div class="subtitle original" id="original">å…¥åŠ›éŸ³å£°: </div>
  <div id="translations"></div>

  <script>
    const googleLanguages = {
      af: 'ã‚¢ãƒ•ãƒªã‚«ãƒ¼ãƒ³ã‚¹èªž', sq: 'ã‚¢ãƒ«ãƒãƒ‹ã‚¢èªž', am: 'ã‚¢ãƒ ãƒãƒ©èªž', ar: 'ã‚¢ãƒ©ãƒ“ã‚¢èªž',
      az: 'ã‚¢ã‚¼ãƒ«ãƒã‚¤ã‚¸ãƒ£ãƒ³èªž', eu: 'ãƒã‚¹ã‚¯èªž', be: 'ãƒ™ãƒ©ãƒ«ãƒ¼ã‚·èªž', bn: 'ãƒ™ãƒ³ã‚¬ãƒ«èªž',
      bs: 'ãƒœã‚¹ãƒ‹ã‚¢èªž', bg: 'ãƒ–ãƒ«ã‚¬ãƒªã‚¢èªž', ca: 'ã‚«ã‚¿ãƒ«ãƒ¼ãƒ‹ãƒ£èªž', ceb: 'ã‚»ãƒ–ã‚¢ãƒŽèªž',
      ny: 'ãƒ‹ãƒ£ãƒ³ã‚¸ãƒ£èªž', 'zh-CN': 'ä¸­å›½èªžï¼ˆç°¡ä½“å­—ï¼‰', 'zh-TW': 'ä¸­å›½èªžï¼ˆç¹ä½“å­—ï¼‰', co: 'ã‚³ãƒ«ã‚·ã‚«èªž',
      hr: 'ã‚¯ãƒ­ã‚¢ãƒã‚¢èªž', cs: 'ãƒã‚§ã‚³èªž', da: 'ãƒ‡ãƒ³ãƒžãƒ¼ã‚¯èªž', nl: 'ã‚ªãƒ©ãƒ³ãƒ€èªž', en: 'è‹±èªž',
      eo: 'ã‚¨ã‚¹ãƒšãƒ©ãƒ³ãƒˆèªž', et: 'ã‚¨ã‚¹ãƒˆãƒ‹ã‚¢èªž', tl: 'ãƒ•ã‚£ãƒªãƒ”ãƒ³èªž', fi: 'ãƒ•ã‚£ãƒ³ãƒ©ãƒ³ãƒ‰èªž',
      fr: 'ãƒ•ãƒ©ãƒ³ã‚¹èªž', gl: 'ã‚¬ãƒªã‚·ã‚¢èªž', ka: 'ã‚¸ãƒ§ãƒ¼ã‚¸ã‚¢èªž', de: 'ãƒ‰ã‚¤ãƒ„èªž', el: 'ã‚®ãƒªã‚·ãƒ£èªž',
      gu: 'ã‚°ã‚¸ãƒ£ãƒ©ãƒ¼ãƒˆèªž', ht: 'ãƒã‚¤ãƒèªž', ha: 'ãƒã‚¦ã‚µèªž', haw: 'ãƒãƒ¯ã‚¤èªž', he: 'ãƒ˜ãƒ–ãƒ©ã‚¤èªž',
      hi: 'ãƒ’ãƒ³ãƒ‡ã‚£ãƒ¼èªž', hmn: 'ãƒ¢ãƒ³èªž', hu: 'ãƒãƒ³ã‚¬ãƒªãƒ¼èªž', is: 'ã‚¢ã‚¤ã‚¹ãƒ©ãƒ³ãƒ‰èªž', id: 'ã‚¤ãƒ³ãƒ‰ãƒã‚·ã‚¢èªž',
      ga: 'ã‚¢ã‚¤ãƒ«ãƒ©ãƒ³ãƒ‰èªž', it: 'ã‚¤ã‚¿ãƒªã‚¢èªž', ja: 'æ—¥æœ¬èªž', jw: 'ã‚¸ãƒ£ãƒ¯èªž', kn: 'ã‚«ãƒ³ãƒŠãƒ€èªž',
      kk: 'ã‚«ã‚¶ãƒ•èªž', km: 'ã‚¯ãƒ¡ãƒ¼ãƒ«èªž', ko: 'éŸ“å›½èªž', ku: 'ã‚¯ãƒ«ãƒ‰èªž', ky: 'ã‚­ãƒ«ã‚®ã‚¹èªž',
      lo: 'ãƒ©ã‚ªèªž', la: 'ãƒ©ãƒ†ãƒ³èªž', lv: 'ãƒ©ãƒˆãƒ“ã‚¢èªž', lt: 'ãƒªãƒˆã‚¢ãƒ‹ã‚¢èªž', lb: 'ãƒ«ã‚¯ã‚»ãƒ³ãƒ–ãƒ«ã‚¯èªž',
      mk: 'ãƒžã‚±ãƒ‰ãƒ‹ã‚¢èªž', mg: 'ãƒžãƒ€ã‚¬ã‚¹ã‚«ãƒ«èªž', ms: 'ãƒžãƒ¬ãƒ¼èªž', ml: 'ãƒžãƒ©ãƒ¤ãƒ¼ãƒ©ãƒ èªž', mt: 'ãƒžãƒ«ã‚¿èªž',
      mi: 'ãƒžã‚ªãƒªèªž', mr: 'ãƒžãƒ©ãƒ¼ãƒ†ã‚£ãƒ¼èªž', mn: 'ãƒ¢ãƒ³ã‚´ãƒ«èªž', my: 'ãƒ“ãƒ«ãƒžèªž', ne: 'ãƒãƒ‘ãƒ¼ãƒ«èªž',
      no: 'ãƒŽãƒ«ã‚¦ã‚§ãƒ¼èªž', ps: 'ãƒ‘ã‚·ãƒ¥ãƒˆãƒ¼èªž', fa: 'ãƒšãƒ«ã‚·ãƒ£èªž', pl: 'ãƒãƒ¼ãƒ©ãƒ³ãƒ‰èªž', pt: 'ãƒãƒ«ãƒˆã‚¬ãƒ«èªž',
      pa: 'ãƒ‘ãƒ³ã‚¸ãƒ£ãƒ–èªž', ro: 'ãƒ«ãƒ¼ãƒžãƒ‹ã‚¢èªž', ru: 'ãƒ­ã‚·ã‚¢èªž', sm: 'ã‚µãƒ¢ã‚¢èªž', gd: 'ã‚¹ã‚³ãƒƒãƒˆãƒ©ãƒ³ãƒ‰ãƒ»ã‚²ãƒ¼ãƒ«èªž',
      sr: 'ã‚»ãƒ«ãƒ“ã‚¢èªž', st: 'ã‚»ã‚½ãƒˆèªž', sn: 'ã‚·ãƒ§ãƒŠèªž', sd: 'ã‚·ãƒ³ãƒ‰èªž', si: 'ã‚·ãƒ³ãƒãƒ©èªž',
      sk: 'ã‚¹ãƒ­ãƒã‚­ã‚¢èªž', sl: 'ã‚¹ãƒ­ãƒ™ãƒ‹ã‚¢èªž', so: 'ã‚½ãƒžãƒªèªž', es: 'ã‚¹ãƒšã‚¤ãƒ³èªž', su: 'ã‚¹ãƒ³ãƒ€èªž',
      sw: 'ã‚¹ãƒ¯ãƒ’ãƒªèªž', sv: 'ã‚¹ã‚¦ã‚§ãƒ¼ãƒ‡ãƒ³èªž', tg: 'ã‚¿ã‚¸ã‚¯èªž', ta: 'ã‚¿ãƒŸãƒ«èªž', te: 'ãƒ†ãƒ«ã‚°èªž',
      th: 'ã‚¿ã‚¤èªž', tr: 'ãƒˆãƒ«ã‚³èªž', uk: 'ã‚¦ã‚¯ãƒ©ã‚¤ãƒŠèªž', ur: 'ã‚¦ãƒ«ãƒ‰ã‚¥ãƒ¼èªž', uz: 'ã‚¦ã‚ºãƒ™ã‚¯èªž',
      vi: 'ãƒ™ãƒˆãƒŠãƒ èªž', cy: 'ã‚¦ã‚§ãƒ¼ãƒ«ã‚ºèªž', xh: 'ã‚³ãƒ¼ã‚µèªž', yi: 'ã‚¤ãƒ‡ã‚£ãƒƒã‚·ãƒ¥èªž', yo: 'ãƒ¨ãƒ«ãƒèªž',
      zu: 'ã‚ºãƒ¼ãƒ«ãƒ¼èªž'
    };

    const langColors = {};
    const selectedLangs = [];
    let inputLangCode = 'ja';

    const translationsDiv = document.getElementById('translations');
    const originalDiv = document.getElementById('original');
    const langSelect = document.getElementById('lang-select');
    const inputLangSelect = document.getElementById('input-lang');

    Object.entries(googleLanguages).forEach(([code, name]) => {
      const opt1 = document.createElement('option');
      opt1.value = code;
      opt1.textContent = `${name} (${code})`;
      langSelect.appendChild(opt1);

      const opt2 = document.createElement('option');
      opt2.value = code;
      opt2.textContent = `${name} (${code})`;
      inputLangSelect.appendChild(opt2);
    });

    function getRandomColor() {
      return `hsl(${Math.floor(Math.random() * 360)}, 80%, 65%)`;
    }

    function addLanguage() {
      const lang = langSelect.value;
      if (!selectedLangs.includes(lang)) {
        selectedLangs.push(lang);
        langColors[lang] = getRandomColor();

        const wrapper = document.createElement('div');
        wrapper.className = 'subtitle translated';
        wrapper.id = `trans-wrapper-${lang}`;

        const span = document.createElement('span');
        span.id = `trans-${lang}`;
        span.style.color = langColors[lang];
        span.textContent = `${googleLanguages[lang]}: `;

        const removeBtn = document.createElement('button');
        removeBtn.className = 'remove-btn';
        removeBtn.textContent = 'âŒ';
        removeBtn.onclick = () => removeLanguage(lang);

        wrapper.appendChild(span);
        wrapper.appendChild(removeBtn);
        translationsDiv.appendChild(wrapper);
      }
    }

    function removeLanguage(lang) {
      const idx = selectedLangs.indexOf(lang);
      if (idx > -1) selectedLangs.splice(idx, 1);
      document.getElementById(`trans-wrapper-${lang}`)?.remove();
    }

    function changeInputLanguage() {
      inputLangCode = inputLangSelect.value;
      restartRecognition();
    }

    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    let recognition = new SpeechRecognition();
    recognition.lang = inputLangCode;
    recognition.continuous = true;
    recognition.interimResults = false;

    function startRecognition() {
      setRecognitionEvents();
      recognition.start();
    }

    function restartRecognition() {
      recognition.stop();
      recognition = new SpeechRecognition();
      recognition.lang = inputLangCode;
      recognition.continuous = true;
      recognition.interimResults = false;
      setRecognitionEvents();
      recognition.start();
    }

    function setRecognitionEvents() {
      recognition.onresult = async function(event) {
        const transcript = event.results[event.resultIndex][0].transcript;
        originalDiv.textContent = "å…¥åŠ›éŸ³å£°: " + transcript;

        for (let lang of selectedLangs) {
          try {
            const res = await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${inputLangCode}&tl=${lang}&dt=t&q=${encodeURIComponent(transcript)}`);
            const data = await res.json();
            const translatedText = data[0].map(item => item[0]).join('');
            const targetSpan = document.getElementById(`trans-${lang}`);
            if (targetSpan) targetSpan.textContent = `${googleLanguages[lang]}: ${translatedText}`;
          } catch (err) {
            const targetSpan = document.getElementById(`trans-${lang}`);
            if (targetSpan) targetSpan.textContent = `${googleLanguages[lang]}: ç¿»è¨³ã‚¨ãƒ©ãƒ¼`;
          }
        }
      };

      recognition.onerror = function(e) {
        originalDiv.textContent = 'ã‚¨ãƒ©ãƒ¼: ' + e.error;
      };
    }

    startRecognition();
  </script>
</body>
</html>
